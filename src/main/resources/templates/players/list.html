<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${ã‚¿ã‚¤ãƒˆãƒ«}">æ¬§å·ã§æ´»èºã™ã‚‹æ—¥æœ¬äººé¸æ‰‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Yu Gothic', Meiryo, sans-serif;
            background: #F5F5F7;
            color: #333333;
            line-height: 1.7;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background: #FFFFFF;
            border-bottom: 1px solid #E5E5E5;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .site-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a1a1a;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .site-logo span {
            font-size: 1.3rem;
        }
        
        nav {
            display: flex;
            gap: 24px;
        }
        
        nav a {
            color: #666666;
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        nav a:hover {
            color: #0056b3;
        }
        
        nav a.active {
            color: #0056b3;
            font-weight: 600;
        }
        
        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .page-header {
            margin-bottom: 30px;
        }
        
        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 2px solid #0056b3;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .page-description {
            color: #666666;
            font-size: 0.95rem;
            margin-top: 12px;
        }
        
        /* çµ±è¨ˆæƒ…å ± */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #0056b3;
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: #666666;
            font-size: 0.9rem;
        }
        
        /* é¸æ‰‹ãƒªã‚¹ãƒˆ */
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }
        
        .player-card {
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-radius: 12px;
            padding: 24px;
            transition: box-shadow 0.2s, transform 0.2s;
        }
        
        .player-card:hover {
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .player-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid #F0F0F0;
        }
        
        .player-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #0056b3 0%, #004494 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #FFFFFF;
            font-weight: 700;
            flex-shrink: 0;
        }
        
        .player-info {
            flex: 1;
        }
        
        .player-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 4px;
        }
        
        .player-team {
            color: #666666;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .league-badge {
            display: inline-block;
            padding: 2px 8px;
            background: #E3F2FD;
            color: #0056b3;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .player-position {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #2E7D32;
            color: #FFFFFF;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .player-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .stat-item {
            text-align: center;
            padding: 12px;
            background: #F9F9F9;
            border-radius: 8px;
        }
        
        .stat-item-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0056b3;
            margin-bottom: 4px;
        }
        
        .stat-item-label {
            font-size: 0.75rem;
            color: #666666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .player-latest-match {
            background: #F5F5F7;
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
        }
        
        .latest-match-title {
            font-size: 0.8rem;
            color: #666666;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .latest-match-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .match-opponent {
            font-weight: 600;
            color: #1a1a1a;
        }
        
        .match-result {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .match-result.win {
            background: #C8E6C9;
            color: #2E7D32;
        }
        
        .match-result.draw {
            background: #FFF9C4;
            color: #F57F17;
        }
        
        .match-result.loss {
            background: #FFCDD2;
            color: #C62828;
        }
        
        .match-details {
            display: flex;
            gap: 16px;
            font-size: 0.85rem;
            color: #666666;
        }
        
        .match-detail-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        /* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .status-message {
            text-align: center;
            padding: 60px 20px;
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-radius: 8px;
            color: #666666;
        }
        
        .status-message.error {
            border-color: #FFD4D4;
            background: #FFF5F5;
            color: #D32F2F;
        }
        
        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state-text {
            color: #666666;
            font-size: 1.1rem;
            margin-bottom: 24px;
        }
        
        .update-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #2E7D32;
            color: #FFFFFF;
            padding: 12px 28px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: background 0.2s, transform 0.1s;
            box-shadow: 0 2px 4px rgba(46,125,50,0.2);
            border: none;
            cursor: pointer;
        }
        
        .update-button:hover {
            background: #1B5E20;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(46,125,50,0.3);
        }
        
        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            background: #FFFFFF;
            border-top: 1px solid #E5E5E5;
            margin-top: 60px;
            padding: 40px 20px 20px;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 20px;
        }
        
        .footer-links a {
            color: #666666;
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .footer-links a:hover {
            color: #0056b3;
        }
        
        .footer-copyright {
            color: #999999;
            font-size: 0.85rem;
            margin-top: 12px;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .player-stats {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div class="header-container">
            <a href="/" class="site-logo">
                <span>âš½</span>
                <span>æµ·å¤–ã‚µãƒƒã‚«ãƒ¼ãƒ‹ãƒ¥ãƒ¼ã‚¹</span>
            </a>
            <nav>
                <a href="/">ãƒ›ãƒ¼ãƒ </a>
                <a href="/players" class="active">æ—¥æœ¬äººé¸æ‰‹</a>
                <a href="/bbs">æ²ç¤ºæ¿</a>
                <a href="/refresh">æœ€æ–°</a>
            </nav>
        </div>
    </header>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">
                <span>ğŸ‡¯ğŸ‡µ</span>
                <span th:text="${ã‚¿ã‚¤ãƒˆãƒ«}">æ¬§å·ã§æ´»èºã™ã‚‹æ—¥æœ¬äººé¸æ‰‹</span>
            </h1>
            <p class="page-description">
                Football-Data.org APIã‹ã‚‰å–å¾—ã—ãŸæœ€æ–°ã®æ—¥æœ¬äººé¸æ‰‹æƒ…å ±ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚
                ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚
            </p>
        </div>
        
        <!-- æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º -->
        <div th:if="${successMessage}" class="status-message" style="border-color: #C8E6C9; background: #E8F5E9; color: #2E7D32; margin-bottom: 20px;">
            <p th:text="${successMessage}">æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p>
        </div>
        
        <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º -->
        <div th:if="${errorMessage}" class="status-message error" style="margin-bottom: 20px;">
            <p th:text="${errorMessage}">ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p>
        </div>
        
        <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼ˆæ—§å½¢å¼ï¼‰ -->
        <div th:if="${ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸}" class="status-message error">
            <p th:text="${ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸}">ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p>
        </div>
        
        <!-- çµ±è¨ˆæƒ…å ± -->
        <div th:if="${é¸æ‰‹ãƒªã‚¹ãƒˆ != null and !é¸æ‰‹ãƒªã‚¹ãƒˆ.isEmpty()}" class="stats-container">
            <div class="stat-card">
                <div class="stat-value" th:text="${é¸æ‰‹æ•°}">0</div>
                <div class="stat-label">ç™»éŒ²é¸æ‰‹æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" th:text="${#aggregates.sum(é¸æ‰‹ãƒªã‚¹ãƒˆ.![goals])}">0</div>
                <div class="stat-label">åˆè¨ˆã‚´ãƒ¼ãƒ«æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" th:text="${#aggregates.sum(é¸æ‰‹ãƒªã‚¹ãƒˆ.![assists])}">0</div>
                <div class="stat-label">åˆè¨ˆã‚¢ã‚·ã‚¹ãƒˆæ•°</div>
            </div>
        </div>
        
        <!-- é¸æ‰‹ä¸€è¦§ -->
        <div th:if="${é¸æ‰‹ãƒªã‚¹ãƒˆ != null and !é¸æ‰‹ãƒªã‚¹ãƒˆ.isEmpty()}">
            <div class="players-grid">
                <div th:each="é¸æ‰‹ : ${é¸æ‰‹ãƒªã‚¹ãƒˆ}" class="player-card" style="position: relative;">
                    <div th:if="${é¸æ‰‹.position != null}" class="player-position" th:text="${é¸æ‰‹.position}">MF</div>
                    
                    <div class="player-header">
                        <div class="player-avatar" th:text="${#strings.substring(é¸æ‰‹.playerName, 0, 1)}">ä¹…</div>
                        <div class="player-info">
                            <div class="player-name" th:text="${é¸æ‰‹.playerName}">ä¹…ä¿å»ºè‹±</div>
                            <div class="player-team">
                                <span th:text="${é¸æ‰‹.teamName}">ãƒ¬ã‚¢ãƒ«ãƒ»ã‚½ã‚·ã‚¨ãƒ€</span>
                                <span th:if="${é¸æ‰‹.jerseyNumber != null}" style="color: #999999;">
                                    #<span th:text="${é¸æ‰‹.jerseyNumber}">14</span>
                                </span>
                            </div>
                            <div style="margin-top: 4px;">
                                <span class="league-badge" th:text="${é¸æ‰‹.league}">ãƒ©ãƒ»ãƒªãƒ¼ã‚¬</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="player-stats">
                        <div class="stat-item">
                            <div class="stat-item-value" th:text="${é¸æ‰‹.goals != null ? é¸æ‰‹.goals : 0}">0</div>
                            <div class="stat-item-label">ã‚´ãƒ¼ãƒ«</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item-value" th:text="${é¸æ‰‹.assists != null ? é¸æ‰‹.assists : 0}">0</div>
                            <div class="stat-item-label">ã‚¢ã‚·ã‚¹ãƒˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item-value" th:text="${é¸æ‰‹.matchesPlayed != null ? é¸æ‰‹.matchesPlayed : 0}">0</div>
                            <div class="stat-item-label">è©¦åˆæ•°</div>
                        </div>
                    </div>
                    
                    <!-- æœ€æ–°è©¦åˆæƒ…å ± -->
                    <div th:if="${é¸æ‰‹.latestMatchDate != null}" class="player-latest-match">
                        <div class="latest-match-title">æœ€æ–°è©¦åˆ</div>
                        <div class="latest-match-info">
                            <span class="match-opponent">
                                vs <span th:text="${é¸æ‰‹.latestOpponent}">ãƒãƒ«ã‚»ãƒ­ãƒŠ</span>
                            </span>
                            <span th:if="${é¸æ‰‹.latestResult != null}" 
                                  class="match-result"
                                  th:classappend="${#strings.contains(é¸æ‰‹.latestResult, 'å‹åˆ©') ? 'win' : (#strings.contains(é¸æ‰‹.latestResult, 'å¼•åˆ†') ? 'draw' : 'loss')}"
                                  th:text="${é¸æ‰‹.latestResult}">2-1å‹åˆ©</span>
                        </div>
                        <div class="match-details">
                            <div th:if="${é¸æ‰‹.latestRating != null}" class="match-detail-item">
                                <span>â­</span>
                                <span th:text="${é¸æ‰‹.latestRating}">7.8</span>
                            </div>
                            <div th:if="${é¸æ‰‹.latestDistance != null}" class="match-detail-item">
                                <span>ğŸƒ</span>
                                <span th:text="${é¸æ‰‹.latestDistance} + 'km'">11.2km</span>
                            </div>
                            <div class="match-detail-item">
                                <span>ğŸ“…</span>
                                <span th:text="${#temporals.format(é¸æ‰‹.latestMatchDate, 'MM/dd')}">01/28</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ›´æ–°ãƒœã‚¿ãƒ³ -->
            <div style="text-align: center; margin-top: 40px; padding-top: 40px; border-top: 1px solid #E5E5E5;">
                <form action="/api/players/update" method="post" style="display: inline-block;">
                    <button type="submit" class="update-button">
                        <span>ğŸ”„</span>
                        <span>é¸æ‰‹æƒ…å ±ã‚’æ›´æ–°</span>
                    </button>
                </form>
                <p style="color: #666666; font-size: 0.9rem; margin-top: 12px;">
                    â€» æ›´æ–°ã«ã¯æ•°åç§’ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
                </p>
            </div>
        </div>
        
        <!-- é¸æ‰‹ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆ -->
        <div th:if="${é¸æ‰‹ãƒªã‚¹ãƒˆ == null or é¸æ‰‹ãƒªã‚¹ãƒˆ.isEmpty()}" class="empty-state">
            <div class="empty-state-icon">âš½</div>
            <p class="empty-state-text">
                æ—¥æœ¬äººé¸æ‰‹ã®ãƒ‡ãƒ¼ã‚¿ãŒã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br>
                ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€æœ€æ–°ã®é¸æ‰‹æƒ…å ±ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚
            </p>
            <form action="/api/players/update" method="post" style="display: inline-block;">
                <button type="submit" class="update-button">
                    <span>ğŸ”„</span>
                    <span>é¸æ‰‹æƒ…å ±ã‚’å–å¾—</span>
                </button>
            </form>
        </div>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer>
        <div class="footer-container">
            <div class="footer-links">
                <a href="/">ãƒ›ãƒ¼ãƒ </a>
                <a href="/players">æ—¥æœ¬äººé¸æ‰‹</a>
                <a href="/bbs">æ²ç¤ºæ¿</a>
                <a href="https://www.football-data.org" target="_blank">Football-Data.org</a>
            </div>
            
            <p class="footer-copyright">
                Â© 2026 æµ·å¤–ã‚µãƒƒã‚«ãƒ¼ãƒ‹ãƒ¥ãƒ¼ã‚¹. All rights reserved.
            </p>
        </div>
    </footer>
</body>
</html>
